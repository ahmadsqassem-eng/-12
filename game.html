<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ù‡ÙŠØ±ÙˆØºÙ„ÙŠÙÙŠØ©</title>
  <style>
    body {
      font-family: "Segoe UI Historic", "Arial", sans-serif;
      text-align: center;
      background: #f4f1e3;
      direction: rtl;
    }
    #board {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }
    .slot {
      width: 80px;
      height: 80px;
      border: 2px dashed #555;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fff;
      font-size: 40px;
    }
    .tile {
      width: 70px;
      height: 70px;
      border: 1px solid #333;
      background: #fff6c1;
      cursor: grab;
      margin: 5px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
    }
    #tiles {
      margin-top: 20px;
      display: none; /* Ù…Ø®ÙÙŠØ© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
      flex-wrap: wrap;
      justify-content: center;
      gap: 5px;
    }
    table {
      margin: 20px auto;
      border-collapse: collapse;
      background: #fff;
      display: none; /* Ù…Ø®ÙÙŠØ© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
    }
    th, td {
      border: 1px solid #555;
      padding: 8px 12px;
      font-size: 24px;
    }
    th {
      background-color: #f0d9b5;
    }
    .correct {
      background-color: #a6f3a6;
    }
    .wrong {
      background-color: #f3a6a6;
    }
    /* Ø²Ø± ÙØ­Øµ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© */
    #checkBtn {
      display: none; /* Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
      font-size: 24px;       
      padding: 12px 30px;    
      background-color: #f0a500; 
      color: white;          
      border: none;
      border-radius: 10px;   
      cursor: pointer;
      margin-top: 20px;
    }
    #checkBtn:hover {
      background-color: #d18b00; 
    }
    /* ØµÙ†Ø¯ÙˆÙ‚ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø¨Ù†ÙØ³ Ø´ÙƒÙ„ Ø²Ø± Ø§Ù„ÙØ­Øµ */
    #nameInput {
      font-size: 24px;
      padding: 12px 30px;
      border: none;
      border-radius: 10px;
      text-align: center;
      width: 250px;
      margin-right: 10px;
    }
    #startBtn {
      font-size: 24px;       
      padding: 12px 30px;    
      background-color: #f0a500; 
      color: white;          
      border: none;
      border-radius: 10px;   
      cursor: pointer;
    }
    #startBtn:hover {
      background-color: #d18b00; 
    }
  </style>
</head>
<body>
  <h1>âœ¦ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø¨Ø§Ù„Ù‡ÙŠØ±ÙˆØºÙ„ÙŠÙÙŠØ© âœ¦</h1>
  
  <!-- Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… -->
  <div id="nameInputSection">
    <input type="text" id="nameInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">
    <button id="startBtn" onclick="startGame()">Ø§Ø¨Ø¯Ø£</button>
  </div>

  <!-- Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ù„Ù„Ø¹Ø¨Ø© -->
  <div id="gameSection">
    <div id="board"></div>
    <div id="tiles"></div>
    <button id="checkBtn" onclick="checkAnswer()">ÙØ­Øµ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>

    <h2>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù‡ÙŠØ±ÙˆØºÙ„ÙŠÙÙŠØ© ÙˆØ§Ù„Ø¹Ø±Ø¨ÙŠØ©</h2>
    <table id="referenceTable">
      <tr>
        <th>Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø¹Ø±Ø¨ÙŠ</th>
        <th>Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù‡ÙŠØ±ÙˆØºÙ„ÙŠÙÙŠ</th>
      </tr>
    </table>
  </div>

  <script>
    const hieroMap = {
      "Ø§":"ğ“€€","Ø¨":"ğ“€","Øª":"ğ“€‚","Ø«":"ğ“€ƒ","Ø¬":"ğ“€„","Ø­":"ğ“€…",
      "Ø®":"ğ“€†","Ø¯":"ğ“€‡","Ø±":"ğ“€ˆ","Ø²":"ğ“€‰","Ø³":"ğ“€Š","Ø´":"ğ“€‹",
      "Øµ":"ğ“€Œ","Ø¶":"ğ“€","Ø·":"ğ“€","Ø¹":"ğ“€","Øº":"ğ“€","Ù":"ğ“€‘",
      "Ù‚":"ğ“€’","Ùƒ":"ğ“€“","Ù„":"ğ“€”","Ù…":"ğ“€•","Ù†":"ğ“€–","Ù‡":"ğ“€—",
      "Ùˆ":"ğ“€˜","ÙŠ":"ğ“€™"
    };

    function startGame() {
      const name = document.getElementById("nameInput").value.trim();
      if (name.length === 0) {
        alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø£ÙˆÙ„Ø§Ù‹");
        return;
      }

      document.getElementById("nameInputSection").style.display = "none";
      document.getElementById("tiles").style.display = "flex";
      document.getElementById("checkBtn").style.display = "inline-block";
      document.getElementById("referenceTable").style.display = "table";

      const board = document.getElementById("board");
      const tiles = document.getElementById("tiles");
      board.innerHTML = "";
      tiles.innerHTML = "";

      // Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø§Ù†Ø§Øª Ø§Ù„Ø§Ø³Ù…
      for (let i = 0; i < name.length; i++) {
        const slot = document.createElement("div");
        slot.className = "slot";
        slot.dataset.letter = name[i];
        board.appendChild(slot);
      }

      // Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙƒØ¹Ø¨Ø§Ù† Ù„ÙƒÙ„ Ø­Ø±Ù Ù…Ø¹ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£ØµÙ„ÙŠ
      for (let letter in hieroMap) {
        for (let i = 0; i < 2; i++) {
          const tile = document.createElement("div");
          tile.className = "tile";
          tile.draggable = true;
          tile.dataset.letter = letter;
          tile.textContent = hieroMap[letter];

          // Ø­ÙØ¸ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£ØµÙ„ÙŠ
          tile.dataset.originalParent = "tiles";

          tile.addEventListener("dragstart", e => {
            e.dataTransfer.setData("text", letter);
            e.dataTransfer.setData("tileId", tile.dataset.letter + "_" + i); // Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„ÙƒÙ„ Ù…ÙƒØ¹Ø¨
          });

          tiles.appendChild(tile);
        }
      }

      // Ø§Ù„Ø¥ÙÙ„Ø§Øª ÙÙŠ Ø§Ù„Ø®Ø§Ù†Ø§Øª
      document.querySelectorAll(".slot").forEach(slot => {
        slot.addEventListener("dragover", e => e.preventDefault());
        slot.addEventListener("drop", e => {
          e.preventDefault();
          const letter = e.dataTransfer.getData("text");

          // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙƒØ¹Ø¨ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¥Ø°Ø§ Ù…ÙˆØ¬ÙˆØ¯ ÙˆØ¥Ø¹Ø§Ø¯ØªÙ‡ Ù„Ù„Ù…Ø®Ø²Ù†
          if (slot.textContent) {
            const oldLetter = slot.textContent;
            const originalTiles = Array.from(document.querySelectorAll(".tile"));
            const oldTile = document.createElement("div");
            oldTile.className = "tile";
            oldTile.draggable = true;
            oldTile.dataset.letter = Object.keys(hieroMap).find(k => hieroMap[k] === oldLetter);
            oldTile.textContent = oldLetter;

            oldTile.addEventListener("dragstart", e => {
              e.dataTransfer.setData("text", oldTile.dataset.letter);
            });

            tiles.appendChild(oldTile);
          }

          // ÙˆØ¶Ø¹ Ø§Ù„Ù…ÙƒØ¹Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ø®Ø§Ù†Ø©
          slot.textContent = hieroMap[letter];

          // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙƒØ¹Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø§Ù„Ù…Ø®Ø²Ù†
          const tilesArray = Array.from(document.querySelectorAll(".tile"));
          for (let t of tilesArray) {
            if (t.dataset.letter === letter && t.textContent === hieroMap[letter]) {
              t.remove();
              break;
            }
          }
        });
      });

      // Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù‡ÙŠØ±ÙˆØºÙ„ÙŠÙÙŠØ© (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©)
      const table = document.getElementById("referenceTable");
      if (table.rows.length === 1) {
        for (let letter in hieroMap) {
          const row = document.createElement("tr");
          const arabicCell = document.createElement("td");
          arabicCell.textContent = letter;
          const hieroCell = document.createElement("td");
          hieroCell.textContent = hieroMap[letter];
          row.appendChild(arabicCell);
          row.appendChild(hieroCell);
          table.appendChild(row);
        }
      }
    }

    function checkAnswer() {
      const slots = document.querySelectorAll(".slot");
      slots.forEach(slot => {
        if (slot.textContent === hieroMap[slot.dataset.letter]) {
          slot.classList.add("correct");
          slot.classList.remove("wrong");
        } else {
          slot.classList.add("wrong");
          slot.classList.remove("correct");
        }
      });
    }
  </script>
</body>
</html>
